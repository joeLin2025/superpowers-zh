# ADR-20260205-02: Evolution of `writing-plans` Skill

## 1. 背景与问题 (Context)
- **当前状态**: `writing-plans` 生成的计划是静态的，容易在执行过程中与现实脱节。缺乏应对“意料之外”的弹性机制。当会话中断后，缺乏标准化的“断点续传”协议。
- **核心挑战**: 如何将计划从“待办清单 (To-Do List)”升级为“动态工程状态机 (Dynamic Engineering State Machine)”。

## 2. 决策驱动因素 (Drivers)
- **设计原则**: 100% 规则 (WBS 必须覆盖所有工作)、原子化执行 (8/80 规则的微缩版)、排他性 (MECE)。
- **技术约束**: 必须兼容 Markdown 格式，便于 git 追踪。
- **业务目标**: 减少因“上下文遗忘”导致的重复劳动和逻辑偏差。

## 3. 候选方案 (Options)
- **Option A (推荐)**: **动态状态机 (Dynamic State Machine)**
    - 引入 `[ ]`, `[-]` (Skipped), `[x]` (Done), `[!]` (Failed) 四种状态。
    - 强制包含“断点续传”和“动态纠偏”章节。
    - 引入 **WBS 深度审计**：强制检查任务粒度是否小于 50 行代码变更。
    - *Pros*: 状态清晰，适应性强，符合 PMP/WBS 最佳实践。
    - *Cons*: 维护成本略增。

- **Option B**: **增强型清单 (Enhanced List)**
    - 仅增加“验证”字段，不改变核心结构。
    - *Pros*: 简单。
    - *Cons*: 无法解决“会话中断”和“计划变更”的痛点。

## 4. 决策结果 (Decision)
- **选择**: Option A
- **理由**: 基于搜集到的 WBS 最佳实践，任务必须是“排他性”且“面向可交付成果”的。动态状态机能更好地映射这一原则，并支持 LLM 的长周期任务执行。

## 5. 后果 (Consequences)
- **正向**: 计划文件将成为项目的“单一事实来源 (SSOT)”。
- **负面/风险**: 用户可能觉得更新计划太频繁。
- **缓解措施**: 通过 `executing-plans` 自动化更新动作，减少用户感知。
