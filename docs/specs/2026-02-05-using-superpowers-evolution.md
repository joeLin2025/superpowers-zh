# Using-Superpowers Evolution Spec

## 1. 背景与目标 (Context & Goals)
- **痛点**: 当前 `skills/using-superpowers/SKILL.md` 对“技能路由”的触发与输出模板不够结构化，且当缺少 `activate_skill`/`Skill` 工具时缺少一致的降级流程说明。
- **目标**: 明确路由判定、显式激活宣告、以及工具缺失时的可审计降级流程；确保每次新指令前的“技能驱动”门禁可执行。
- **非目标 (Non-Goals)**: 不改动其他技能内容；不引入任何实现代码或新的外部工具。

## 2. 核心设计 (Core Design)
- **API 变更**: 定义固定的“激活宣告模板”和“路由判定模板”，要求在响应中输出；定义工具缺失的降级声明格式。
- **数据结构**: 维护意图分类列表（Bug/新需求/实施/完成/规范类）及对应技能映射表。
- **逻辑流**: 1) 识别意图 2) 选择技能 3) 宣告激活 4) 若工具不可用则声明降级路径 5) 按所选技能流程执行。

## 3. 方案权衡 (Trade-offs)
| 维度 | 方案 A (推荐) | 方案 B (替代) |
| :--- | :--- | :--- |
| **复杂度** | 中 | 低 |
| **风险** | 低：流程可审计、可复现 | 中：可能产生不可控跳步 |
| **维护成本** | 中：需维护模板与映射 | 低：文档更短但规则弱 |

## 4. 风险与副作用 (Risks & Side Effects)
- **受影响文件**: `skills/using-superpowers/SKILL.md`
- **破坏性变更**: 响应更冗长；若用户拒绝流程可能导致执行延迟。
