---
name: systematic-debugging
description: 当遇到 Bug、测试失败或非预期行为时，在提出修复方案前使用，以确保基于证据的科学排障。
---

# 系统化调试 (Systematic Debugging)

## 概述

本技能要求先建立可复现、可验证、可审计的证据链，再进入修复，杜绝猜测式改动。

## 何时使用

- 测试失败或运行异常。
- 行为与预期不一致但无明确原因。

**触发关键词**: `bug / error / 报错 / 修复`

## 强制流程 (Workflow)

### 1. 复现与最小化
- 必须构造稳定复现步骤。
- 必须缩小到最小可复现范围。

### 2. 证据收集
- 必须收集日志、堆栈、输入输出样本。
- 必须记录环境与版本信息。

### 3. 假设与单变量验证
- 每次只验证一个假设。
- 禁止同时改多个变量。

### 4. 修复与回归
- 修复必须伴随验证步骤。
- 必须执行回归测试确保无副作用。

## 输出物 (Artifacts)

- 必须在问题记录中写入：复现步骤、证据、假设、验证结果。
- 若无现有记录载体，可附加到计划文件的“调试记录”段落。

## 验证与证据 (Verification & Evidence)

- 复现步骤必须可重复。
- 证据必须可追溯到日志或堆栈。

## 对抗测试 (Adversarial Tests)

- 无可复现步骤就开始修复，必须停止并先复现。
- 同时改动多个变量进行验证，必须拆分为单变量验证。
- 证据链缺失仍下结论，必须补齐日志、堆栈与样本。
## 红旗/反例 (Red Flags & Anti-Patterns)

- 无复现就修复。
- 同时修改多个变量。
- 没有证据却下结论。

## 例外与降级策略 (Exceptions & Degrade)

- 若无法复现，必须停止并明确记录假设与阻断原因。

## 工具映射 (Tool Mapping)

- `run_shell_command` -> `shell_command`
- `read_file` -> `Get-Content`
- `grep` -> `rg`

