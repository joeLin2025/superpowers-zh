---
name: requesting-code-review
description: 当完成任务、实施主要功能或合并之前使用，以验证工作是否符合要求。
---

# 请求代码审查 (Requesting Code Review)

## 概述

此技能强制执行高质量的自我审查和审查请求流程。

**核心原则：**
1.  **自我审查是第一道防线**：你自己都没看过的代码，没有资格给别人看。
2.  **上下文为王**：审查者不是你肚子里的蛔虫。提供充足的背景信息。
3.  **尊重审查者的时间**：不要让审查者帮你找拼写错误和 Lint 错误。

## 何时使用

- 完成了一个功能分支的开发（在 `finishing-a-development-branch` 之后）。
- 准备将代码合并到共享分支时。
- 需要通过自动化工具（如 `subagent-driven-development` 中的审查者）进行检查时。

## 核心法则

### 1. 必须先进行自我审查

在发起请求之前，**必须**逐行阅读自己的 diff：
- **必须**问自己：“这行代码为什么要在这里？”、“这个变量名清晰吗？”
- **必须**修复所有显而易见的错误（Typos, 格式, 调试日志）。
- **严禁**提交连你自己都觉得“有点乱”的代码。

### 2. 必须提供完整上下文

在 PR 描述或审查请求中，**必须**使用中文清楚描述（代码引用除外）：
- **目标**：这个变更解决了什么问题？（关联 Issue/Ticket）
- **实现逻辑**：你是怎么解决的？关键的决策点是什么？
- **验证方法**：你是怎么测试的？（截图、日志片段）。
- **风险**：有哪些潜在的副作用？

### 3. 必须通过自动化检查

- **必须**确保所有测试通过。
- **必须**确保 Lint 检查通过。
- **严禁**让审查者指出“未使用的变量”这种机器能发现的问题。

### 4. 必须保持变更原子化

- 如果变更包含 20 个文件，**必须**解释为什么这不能拆分成更小的 PR。
- **严禁**在一个 PR 里既修复 Bug A，又重构模块 B，还顺便改了 C 的格式。
- 一个 PR 只做一件事。

## 借口粉碎机 (Excuse Smasher)

| 借口 | 事实反击 |
|------|----------|
| “代码都在那里，他们自己看就行了” | 没人有义务去猜测你的意图。帮助他们帮助你。 |
| “我已经在本地测过了，不用写在描述里” | 除非你贴出证据，否则它就是没测过。 |
| “这个 PR 有点大，但我赶时间” | 大 PR 导致低质量审查。拆分它不仅是为了审查者，也是为了你自己的回滚安全。 |
| “我不知道怎么写描述” | 按照模板填空。如果填不出来，说明你没想清楚。 |

## 危险信号 (Red Flags)

如果出现以下情况，**立即停止**发起请求：

- PR 描述只有一行字：“Fix bug”。
- 变更包含了大量自动生成的代码（如 `package-lock.json`）却没说明。
- 你在这个 PR 里顺手改了无关文件的格式。
- 你心里想着“希望他们不要发现那个 Hack”。