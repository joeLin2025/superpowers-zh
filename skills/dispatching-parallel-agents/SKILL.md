---
name: dispatching-parallel-agents
description: 当面临 2 个及以上可独立进行、无共享状态且无顺序依赖的任务时，用于调度多个并行智能体以提升执行效率。
---

# 调度并行智能体 (Dispatching Parallel Agents)

## 概述

调度并行智能体是一种通过并发执行独立任务来最大化开发效率的策略。其核心在于将复杂问题解构为互不干扰的原子任务，并委派给多个专注的智能体同步处理。

**核心原则：**
- **彻底独立**：任务之间严禁有逻辑耦合或资源竞争。
- **任务专注**：每个智能体仅负责单一、明确的问题领域。
- **集成验证**：并行执行后的成果必须经过人工审查、冲突检测和全局回归测试。

## 何时使用

- **多点故障**：多个测试文件（3个以上）因不同原因报错。
- **模块损坏**：多个独立的子系统或模块同时需要修复或调查。
- **领域解耦**：每个问题都能在不参考其他任务上下文的情况下被理解和解决。
- **无状态共享**：各任务之间不涉及对同一段代码的修改或对相同资源的竞争。

**何时不使用：**
- 故障具有相关性（修复一个可能连锁修复其他）。
- 需要全局系统视图才能定位问题。
- 任务间存在严格的先后执行顺序。
- 智能体可能会修改相同的文件导致代码冲突。

## 核心法则

### 1. 必须严选独立领域
在调度前，**必须**通过初步分析确认各故障点的独立性。
- **严禁**在未确认依赖关系的情况下盲目并行。
- 如果不确定是否独立，**必须**假设它们是相关的，并串行处理。

### 2. 必须界定明确边界
为每个智能体分配任务时，**必须**指定精确的：
- **文件范围**：只能修改哪些文件。
- **修复目标**：必须通过哪些测试。
- **约束条件**：严禁修改生产代码或公共库。
- **语言要求**：明确要求智能体使用中文汇报进度和结果。

### 3. 必须强制集成验证
智能体返回结果后，**必须**依次执行：
1.  **人工审查**：阅读每个智能体的改动总结。
2.  **冲突检测**：运行 `git merge` 或检查差异。
3.  **全量回归**：运行项目的完整测试套件，确保没有引入副作用。

### 4. 严禁指派模糊任务
- **禁止**发送如“修复所有测试”等宽泛指令。
- **必须**提供具体的测试名称、错误堆栈或日志片段。

## 借口粉碎机 (Excuse Smasher)

| 借口 | 事实反击 |
|------|----------|
| “我可以直接一个一个修，也不慢” | 并行执行能节省数倍的等待时间，效率是核心竞争力。 |
| “分析独立性太麻烦了，直接全派出去就行” | 缺乏分析的并行会导致严重的合并冲突和重复劳动，磨刀不误砍柴工。 |
| “我看他们改的地方不一样，不需要跑全量测试” | 代码间的隐性耦合不可预判，集成验证是最后的安全防线。 |
| “智能体很聪明，不需要我给太多约束” | 没有约束的智能体会进行不可控的重构，极大增加审查成本。 |

## 危险信号 (Red Flags)

如果出现以下情况，**立即停止**并行调度：

- **任务冲突**：两个或多个智能体正在编辑同一个文件或函数。
- **描述模糊**：指派任务时没有提供具体的测试用例名称或错误日志。
- **忽视审查**：直接合并智能体的代码而没有阅读其改动总结。
- **集成失败**：合并后全量测试报错，说明任务分解时存在未识别的依赖。