---
name: executing-plans
description: 当需要严格按书面计划分批执行任务，并确保每一步都经过验证与审查时使用。
---

# 执行计划 (Executing Plans)

## 概述

本技能将静态计划转换为受控执行流程，强调证据物化、批次检查点与失败熔断，确保执行可追踪、可回滚。

## 何时使用

- 存在 `writing-plans` 生成的计划文件。
- 任务涉及多步骤或高风险变更。

**触发关键词**: `执行计划 / 按计划 / 计划落地`

## 强制流程 (Workflow)

### 1. 计划对齐
- 必须完整加载计划文件并声明当前批次。
- 计划存在错误或不可执行步骤时必须停机修正。

### 2. 状态同步
- 执行前将任务标记为“进行中”。
- 执行后标记为完成，并写入验证记录。

### 3. 批次执行与停顿
- 单批次最多执行 3 个任务。
- 批次结束必须记录审查结论。
- 若执行模式为 `Auto-continue`，可不等待用户确认，但必须保留审查记录。

### 4. 可靠性检查点
- 关键步骤后必须执行最小回归验证。
- 任何失败必须记录“失败原因 + 影响范围 + 处理动作”。

### 5. 执行熔断
- 测试失败、环境异常或指令模糊：立即停止。

## 输出物 (Artifacts)

- 必须更新计划文件中的任务状态与验证记录。
- 必须采用以下执行记录格式（可写入计划文件任务下）：

```text
执行记录:
- 变更摘要: ...
- 验证输出: ...
```

## 验证与证据 (Verification & Evidence)

- 计划文件必须记录每步的验证输出。
- 批次审查记录必须存在。

## 对抗测试 (Adversarial Tests)

- 未加载计划文件或未声明当前批次，必须停止并补齐。
- 单批次超过 3 个任务或缺少批次审查记录，必须拆分并补齐记录。
- 测试失败仍尝试继续执行，必须熔断并停止。
## 红旗/反例 (Red Flags & Anti-Patterns)

- 计划文件未更新但执行已完成。
- 连续执行超过 3 个任务未停顿。
- 失败后继续下一步。

## 例外与降级策略 (Exceptions & Degrade)

- 若计划缺失或不可执行，回退到 `writing-plans` 修订。
- 若环境异常无法验证，必须停止并说明阻断原因。

## 工具映射 (Tool Mapping)

- `run_shell_command` -> `shell_command`
- `edit_file` -> `apply_patch`

