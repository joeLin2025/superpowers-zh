---
name: executing-plans
description: 当需要严格按照书面计划分批执行任务，并确保每一步都经过验证与审查时使用。
---

# 执行计划 (Executing Plans)

## 概述

此技能是将书面实施计划转化为受控变更的铁律。通过“分批执行 + 架构师审查”的循环，确保复杂任务的每一步都准确无误，并保持执行过程的完全透明。

核心原则：
- **严格依从**：计划是最高指令。执行期间严禁私自变更路线、增加非计划内任务或跳过步骤。
- **状态透明**：每一步的进展必须实时在计划文件中同步，严禁脱离文档进行“隐形”开发。
- **验证驱动**：没有原始验证输出的进度报告一律视为无效。

## 何时使用

- 已经持有详细的实施计划（如由 `writing-plans` 生成的计划文件）。
- 正在进行多步骤、高风险或跨模块的代码变更。
- 需要在关键检查点（Checkpoints）暂停以获取反馈或确认。
- **出现以下症状时：**
    - 面对复杂任务感到迷茫，难以精确回答“目前进度百分之几”。
    - 发现自己正在“顺便”修改与当前目标无关的代码。
    - 验证过程杂乱无章，不确定之前的改动是否引入了副作用。

**何时不使用：**
- 简单的探索性调研或纯脑暴过程（使用 `brainstorming`）。
- 修复极其微小、不涉及逻辑变更的拼写错误。

## 核心法则

### 1. 预审与对齐
- **必须**在执行前完整加载并阅读计划文件。
- **必须**对计划进行批判性审查。若发现逻辑漏洞、路径错误或环境不兼容，**严禁开始执行**，必须立即指出并修正计划。
- 确认无误后，**必须**明确宣布：“我正在使用 `executing-plans` 技能来实施此计划。”

### 2. 批次化强制执行
- **严禁**一次性执行所有任务。默认批次上限为 **3 个任务**。
- **必须**严格遵守计划中的细粒度步骤。严禁合并步骤或在未完成当前步骤前开启下一步。
- 每个批次结束时，**必须**停止并请求反馈。在获得明确的“继续”信号前，严禁进入下一批次。

### 2.5 交付一致性 (Delivery Alignment)
- **必须**严格遵循计划文件中记录的 `Delivery Mode`。
- **若为 Local Auto-commit**：每完成一个原子步骤并验证通过后，**必须**立即在本地执行 `git commit`。提交信息应引用计划中的步骤。
- **若为 Manual**：严禁产生任何 Git 提交，仅在本地保留变更。
- **严禁 Push**：智能体在任何情况下都不得执行 `git push`。

### 3. 实时状态同步与证据物化
- **启动任务前**：**必须**在计划文件中将当前任务标记为“进行中”（例如通过 `TodoWrite` 将 `[ ]` 改为 `[ ] (进行中)`）。
- **执行过程中**：严禁偏离计划。如发现必须调整，**必须**先更新计划文件并获得确认，然后再继续。
- **完成任务后**：**必须**在计划中标记为 `[x]`，并**必须**将关键的验证输出（如测试日志、命令返回片段）追加记录到计划文件中对应任务的下方，形成审计链。**严禁**仅在对话中贴出日志。

### 4. 阻塞即停止
- 遇到任何不确定的指令、测试失败或意外阻塞，**必须立即停止**。
- **严禁猜测执行。** 寻求澄清是唯一正确的选择。

### 5. 完成并集成
- 所有计划任务验证通过后，**必须**调用 `finishing-a-development-branch` 技能进行最终质量合规检查与代码集成。

## 借口粉碎机 (Excuse Smasher)

| 借口 | 事实反击 |
|------|----------|
| “这个改动很小，顺便做了没关系。” | 计划外的任何改动都是风险。坚持“先计划，后执行”是工程化的底线。 |
| “我记得计划内容，不用每次都看。” | 记忆是不可靠的。只有实时对照计划，才能确保不偏离最初的架构意图。 |
| “我已经手动测过了，不需要贴日志。” | 没展示证据就等于没做。必须通过可重复的验证输出证明结果的正确性。 |
| “我一次性做完再汇报更高效。” | 分批汇报是为了及早止损。一次性做完后的推倒重来才是最大的浪费。 |
| “计划里这里写错了，我直接按对的做了。” | 发现错误必须先更新计划。保持计划与代码的一致性比单纯“做对”更重要。 |

## 危险信号 (Red Flags)

如果出现以下情况，**立即停止**当前执行并寻求纠正：

- **擅自扩权**：修改了计划之外的文件或执行了未定义的任务。
- **验证缺失**：进度汇报中缺少真实的验证输出（如日志、截图说明或测试结果）。
- **贪功冒进**：连续执行任务超过 3 个而没有按批次停顿请求反馈。
- **状态失踪**：任务开始或结束时未能在计划文档中及时更新状态。
- **语言模糊**：使用“应该可以”、“大概没问题”等非确定性词汇汇报进度。
- **盲目执行**：计划步骤明显有误或环境已发生变化，却仍然机械执行而不停步。