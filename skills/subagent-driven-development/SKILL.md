---
name: subagent-driven-development
description: 当在当前会话中执行具有独立任务的实施计划时使用。
---

# 子智能体驱动开发 (Subagent-Driven Development)

## 概述

此技能强制执行严格的角色分离和子智能体编排流程，确保复杂任务被分解为可管理的单元。

**核心原则：**
1.  **角色分离**：实施者（Implementer）、规格审查者（Spec Reviewer）和质量审查者（Quality Reviewer）必须是独立的执行单元。
2.  **指令闭环**：每个子智能体必须获得完成任务所需的全部上下文，严禁依赖隐式知识。
3.  **零信任**：主智能体严禁盲目信任子智能体的输出，必须通过独立的审查者进行验证。

## 何时使用

- 需要并行处理多个独立任务时。
- 任务复杂到需要“分而治之”时。
- 实施计划（Execution Plan）已经就绪，需要具体执行时。

## 核心法则

### 1. 必须使用角色专用指令

调用 `delegate_to_agent` 时，**必须**使用预定义的角色指令模板：
- **实施者 (Implementer)**：负责具体的代码编写和测试。
- **规格审查者 (Spec Reviewer)**：负责对比实现与需求的一致性。
- **质量审查者 (Quality Reviewer)**：负责代码风格、安全性和可维护性检查。

### 2. 必须提供封闭上下文

分派任务时，**必须**在 prompt 中包含：
- **目标**：清晰的成功标准。
- **输入**：相关文件路径、代码片段或计划条目。
- **约束**：什么不能改，必须遵守什么规范。
- **严禁**只给一句“修复这个 Bug”，而不提供错误日志和代码位置。

### 3. 必须执行双重审查

子智能体提交代码后，**必须**依次运行：
1.  **规格审查**：验证是否满足了最初的需求。
2.  **质量审查**：验证代码是否符合项目标准。
只有两次审查都通过，才能合并代码。

### 4. 严禁越权

- 子智能体**严禁**修改其任务范围之外的代码。
- 如果子智能体发现架构问题，**必须**返回报告，而不是擅自重构。

## 借口粉碎机 (Excuse Smasher)

| 借口 | 事实反击 |
|------|----------|
| “这个任务很简单，不需要这么复杂的流程” | 流程是为了防止“以为很简单”导致的错误。简单的任务是练习流程的最佳机会。 |
| “我自己写比分派给子智能体快” | 你的上下文窗口有限。子智能体可以并行工作，且不会污染你的上下文。 |
| “审查太费时间了” | 修复 Bug 的时间是审查时间的 10 倍。 |
| “子智能体应该知道该怎么做” | 它们不知道。它们只有你给的信息。如果不清楚，那是你的指令问题。 |

## 危险信号 (Red Flags)

如果出现以下情况，**立即停止**并重置流程：

- 给子智能体的指令只有一句话。
- 跳过了规格审查直接进行质量审查。
- 子智能体返回了“我无法完成”，因为缺少上下文。
- 你发现自己在手动修复子智能体写的代码（而不是让它自己修）。