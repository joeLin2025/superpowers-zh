---
name: verification-before-completion
description: 在声称修复完成、功能交付或准备提交代码前使用，确立“证据优先”的验收基准。
---

# 完工前验证 (Verification Before Completion)

## 概述

本技能以“证据优先”为唯一完成标准，要求在宣布完成前完成回归与静态检查，并将证据物化到交付说明中。

## 何时使用

- 准备声明“完成”。
- 准备提交或合并代码。
- 用户要求验收或交付说明。

**触发关键词**: `完成 / 验收 / 交付 / 合并`

## 强制流程 (Workflow)

### 1. 验证清单执行
- 必须执行计划中定义的全部验证步骤。
- 必须补充最小回归验证（测试 + 静态检查）。

### 2. 证据物化
- 必须将验证输出写入交付说明。
- 禁止仅口头声明“已完成”。

### 3. 风险披露
- 必须列出未覆盖场景与已知风险。

## 输出物 (Artifacts)

- 必须在计划文件或交付说明中追加验收段落，使用以下模板：

```markdown
## 交付说明 (Delivery Notes)
- **范围**:
- **验证**:
- **未覆盖/风险**:
```

## 验证与证据 (Verification & Evidence)

- 交付说明必须包含验证输出或可追踪链接。
- 若验证失败，必须中止并记录失败原因。

## 红旗/反例 (Red Flags & Anti-Patterns)

- 无验证日志却宣称完成。
- 未披露风险或未覆盖场景。

## 例外与降级策略 (Exceptions & Degrade)

- 若环境无法验证，必须说明阻断原因并暂停交付。
- 若验证成本过高，必须明确标记为“未验证”。

## 工具映射 (Tool Mapping)

- `run_shell_command` -> `shell_command`
- `edit_file` -> `apply_patch`

