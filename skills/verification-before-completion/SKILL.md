---
name: verification-before-completion
description: 在声称修复完成、功能交付或准备提交代码前使用，确立“证据优先”的验收基准。
---

# 完工前验证 (Verification Before Completion)

## 概述

本技能要求以证据为唯一完成标准，避免口头承诺与未验证交付。

**核心原则**
1. **证据即真相**：没有日志就没有完成。
2. **全量验证**：必须执行回归与静态检查。
3. **证据物化**：验证输出必须写入交付说明。

## 何时使用

- 准备宣布“完成”。
- 准备提交或合并代码。

## 强制流程 (Workflow)

### 1. Definition of Done (DoD)
- 明确验收边界与验证范围。

### 2. 执行验证
- 运行测试、Lint、类型检查或等效验证。

### 3. 证据矩阵 (强制)

| 交付类型 | 必要证据 | 质量底线 |
| :--- | :--- | :--- |
| Bug 修复 | MRE 从 Red 到 Green 的日志 | 无回归失败 |
| 新功能 | 新增测试通过日志 | 文档更新完成 |
| 重构 | 全量测试通过日志 | 无行为变化 |

### 4. 交付声明格式 (强制)

```text
[交付声明]
1. 验证命令:
2. 关键证据:
3. 完整性检查:
4. 计划状态同步:
结论:
```

## 禁令
- 禁止口头承诺或“看起来没问题”。
- 禁止只报告 Exit Code 而不贴日志。
- 禁止未同步计划状态。

## 借口粉碎机 (Excuse Smasher)

| 借口 | 事实反击 |
|------|----------|
| “改动很小，不用全量验证” | 小改动也可能引发系统性回归。 |
| “我已经看过了” | 人眼不能替代可复现的证据。 |
| “日志太长不贴” | 没有证据就是没有完成。 |

## 危险信号 (Red Flags)

- 未提供验证日志。
- 计划状态未同步。
- 只贴成功摘要而无关键证据。
