---
name: writing-skills
description: 创建新技能、编辑现有技能或在部署前验证技能时使用。
---

# 编写技能 (Writing Skills)

## 概述

此技能强制将技能文档视为**可执行代码**，并采用测试驱动开发 (TDD) 的方式进行构建。

**核心原则：**
1.  **无红不绿**：如果没有亲眼看到智能体在没有技能的情况下失败（Baseline Failure），严禁编写或修改技能文档。
2.  **结构即功能**：必须严格遵守统一的文档结构，以确保智能体能准确解析和执行。
3.  **防御性设计**：技能必须预判并封堵智能体的每一个潜在借口。

## 何时使用

- 需要创建新的 `.gemini/skills/` 技能时。
- 需要修改现有技能以纠正不良行为时。
- 发现智能体持续违反某项工程原则时。

**何时不使用：**
- 记录特定项目的具体配置（应写入 `README.md`）。
- 记录一次性的临时脚本。

## 核心法则

### 1. 必须执行 TDD 循环

你**必须**严格按照以下顺序操作，严禁跳步：

1.  **红 (Red - Baseline)**：
    *   构造一个“压力测试提示词”（User Prompt）。
    *   在**不**激活新技能的情况下运行它。
    *   **必须**观察到智能体做出了错误的行为（如跳过测试、使用了错误的工具）。
    *   记录下智能体当时使用的借口。

2.  **绿 (Green - Draft)**：
    *   编写 `SKILL.md` 文档。
    *   激活技能并再次运行相同的提示词。
    *   **必须**观察到智能体修正了行为并引用了技能规则。

3.  **重构 (Refactor - Bulletproof)**：
    *   针对测试中发现的漏洞，添加“严禁”条款。
    *   将观察到的借口填入“借口粉碎机”。

### 2. 必须强制执行标准结构

所有 `SKILL.md` **必须**包含以下一级标题，顺序不得颠倒：

1.  **Frontmatter**：YAML 格式，仅包含 `name` (kebab-case) 和 `description` (以“当...时使用”开头)。
2.  **概述 (Overview)**：核心定义与原则。
3.  **何时使用 (When to use)**：明确的触发条件列表。
4.  **核心法则 (Core Rules)**：使用“必须”、“严禁”定义的绝对行为准则。
5.  **借口粉碎机 (Excuse Smasher)**：表格形式，左列为借口，右列为事实反击。
6.  **危险信号 (Red Flags)**：列表形式，定义必须立即停止的行为。

### 3. 必须进行搜索优化 (GSO)

- **Description 字段**：**必须**描述触发场景（When），而不是技能功能（What）。
    - ❌ *Bad*: "这个技能用于运行测试。"
    - ✅ *Good*: "当需要验证代码更改或提交 PR 之前使用。"
- **关键词覆盖**：在正文中自然包含相关的错误消息、工具名称和同义词，以便语义检索命中。

### 4. 必须使用强约束语言

- **严禁**使用：“建议”、“最好”、“可以”、“有助于”。
- **必须**使用：“必须”、“严禁”、“立即停止”、“无条件执行”。
- **理由**：技能是法律，不是建议。模糊的语言是执行力的漏洞。

## 借口粉碎机 (Excuse Smasher)

| 借口 | 事实反击 |
|------|----------|
| “我知道这个技能该怎么写，不用测基线” | 没有基线对比，你就无法证明技能的有效性。盲写是自大的表现。 |
| “这个规则太简单了，不需要写进借口表” | 最简单的规则最容易被忽视。借口表是智能体的“防御性思维”训练。 |
| “我以后再完善格式” | 格式决定了智能体的解析效率。现在的混乱就是未来的 Bug。 |
| “我只是改个错别字” | 即使是微小的修改，也必须验证它没有破坏原有的约束力。 |

## 危险信号 (Red Flags)

如果出现以下情况，**立即停止**并删除草稿：

- 在 Frontmatter 的 `description` 中总结了技能的流程（如“第一步做这个...”）。
- 正文中出现了“建议”或“Please”。
- 缺少“借口粉碎机”章节。
- 你在没有运行失败测试的情况下就声称技能已完成。
- 你引用了其他技能但没有使用 `activate_skill`（技能之间应保持独立，除非显式依赖）。